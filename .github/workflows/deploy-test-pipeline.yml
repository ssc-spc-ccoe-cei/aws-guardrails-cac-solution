name: Deploy to Test

on:
  workflow_dispatch:
  push:
    branches:
      - main

env:
  AWS_REGION: 'ca-central-1'  

jobs:
  deployToTest:
    environment: test
    uses: ssc-spc-ccoe-cei/aws-guardrails-cac-solution/.github/workflows/deploy.yml@main
    with:
      aws-region: ${{ env.AWS_REGION }}
      deploy-version: ${{ vars.DEPLOY_VERSION }}
    secrets:
      aws-role-arn: ${{ secrets.AWS_ROLE_ARN }}
      config-file-content: ${{ secrets.CONFIG_FILE_CONTENT }}
